require(["jquery","gAlert","gAjax"],function(e,a,s){!function(e){function a(e){var a=e;return a.length>=4&&a.length<=8?!0:!1}function s(e){var a=e;return a.length>0?!0:!1}function n(){u=m.val(),s(u)?m.parent().removeClass("has-error").addClass("has-success"):m.parent().removeClass("has-success").addClass("has-error")}function t(){i=l.val()||c,a(i)?l.parent().removeClass("has-error").addClass("has-success"):l.parent().removeClass("has-success").addClass("has-error")}var r=window.location.href,o="/blogs/"+r.split("/")[4]+"/comment";e().gAjax({type:"GET",url:o,success:function(a){e("#commentsShow").append(a)},error:function(){e().gAlert({title:"",info:"评论加载超时,请刷新",btn:1,width:"200px"})}});var c=e("#commentName").html(),l=e("[name = commentName]"),m=e("[name = commentContent]"),i=l.val()||c,u=m.val();l.on("keyup",function(){t()}),m.on("keyup",function(){n()}),e("#commentForm").on("click","button",function(r){i=l.val()||c,u=m.val();var d=null;return t(),n(),a(i)&&s(u)?(e().gAjax({type:"POST",url:o,async:!1,data:{commentName:i,commentContent:u},success:function(a){switch(a.success){case"0":l.parent().removeClass("has-success").addClass("has-error"),m.parent().removeClass("has-success").addClass("has-error");break;case"1":e().gAlert({title:"",info:a.error,btn:1,width:"200px"});break;case"2":e("#commentNameDom").children().remove();var s=e("#commentsShow"),n="",t=s.children().length;n='<div class="media"><div class="media-left"><a>#'+(t+1)+'</a></div><div class="media-body"><h4 class="media-heading">'+i+"</h4><small>"+u+"</small></div></div>",s.append(n);var r=e("#commentCount"),o=r.html();return r.html(parseInt(o)+1),d=a.result}},error:function(){e().gAlert({title:"",info:"加载超时,请重试",btn:1,width:"200px"})},callback:function(){e("#commentNameDom").append(d),m.val("")}}),d):void 0})}(jQuery)});